define(["@grafana/data","react","@grafana/ui"],((t,e,i)=>(()=>{var r={681:function(t,e){var i,r;function n(){var t=Math.log,e=Math.exp,i=Math.pow,r=Math.min,n=Math.max,s=Math.abs,o=459.67,a=273.15,h=53.35,u=287.042,l=1e-7,d=32.018,m=void 0,p=void 0;this.IP=1,this.SI=2,this.SetUnitSystem=function(t){if(t!=this.IP&&t!=this.SI)throw new Error("UnitSystem must be IP or SI");p=(m=t)==this.IP?.001*9/5:.001},this.GetUnitSystem=function(){return m},this.isIP=function(){if(m==this.IP)return!0;if(m==this.SI)return!1;throw new Error("Unit system is not defined")},this.GetTRankineFromTFahrenheit=function(t){return t+o},this.GetTFahrenheitFromTRankine=function(t){return t-o},this.GetTKelvinFromTCelsius=function(t){return t+a},this.GetTCelsiusFromTKelvin=function(t){return t-a},this.GetTWetBulbFromTDewPoint=function(t,e,i){var r;if(!(e<=t))throw new Error("Dew point temperature is above dry bulb temperature");return r=this.GetHumRatioFromTDewPoint(e,i),this.GetTWetBulbFromHumRatio(t,r,i)},this.GetTWetBulbFromRelHum=function(t,e,i){var r;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return r=this.GetHumRatioFromRelHum(t,e,i),this.GetTWetBulbFromHumRatio(t,r,i)},this.GetRelHumFromTDewPoint=function(t,e){if(!(e<=t))throw new Error("Dew point temperature is above dry bulb temperature");return this.GetSatVapPres(e)/this.GetSatVapPres(t)},this.GetRelHumFromTWetBulb=function(t,e,i){var r;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetHumRatioFromTWetBulb(t,e,i),this.GetRelHumFromHumRatio(t,r,i)},this.GetTDewPointFromRelHum=function(t,e){var i;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return i=this.GetVapPresFromRelHum(t,e),this.GetTDewPointFromVapPres(t,i)},this.GetTDewPointFromTWetBulb=function(t,e,i){var r;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetHumRatioFromTWetBulb(t,e,i),this.GetTDewPointFromHumRatio(t,r,i)},this.GetVapPresFromRelHum=function(t,e){if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return e*this.GetSatVapPres(t)},this.GetRelHumFromVapPres=function(t,e){if(!(e>=0))throw new Error("Partial pressure of water vapor in moist air is negative");return e/this.GetSatVapPres(t)},this.dLnPws_=function(t){var e,r;return this.isIP()?(r=this.GetTRankineFromTFahrenheit(t),e=t<=d?10214.165/i(r,2)-.0053765794+3.8404754e-7*r+1.06727496e-9*i(r,2)-361378752e-21*i(r,3)+4.1635019/r:10440.397/i(r,2)-.027022355+2578072e-11*r-7.4342043e-9*i(r,2)+6.5459673/r):(r=this.GetTKelvinFromTCelsius(t),e=t<=.01?5674.5359/i(r,2)-.009677843+2*6.2215701e-7*r+6.2243475e-9*i(r,2)-37936096e-19*i(r,3)+4.1635019/r:5800.2206/i(r,2)-.048640239+83529536e-12*r-4.3356279e-8*i(r,2)+6.5459673/r),e},this.GetTDewPointFromVapPres=function(e,i){var o;if(o=this.isIP()?[-148,392]:[-100,200],i<this.GetSatVapPres(o[0])||i>this.GetSatVapPres(o[1]))throw new Error("Partial pressure of water vapor is outside range of validity of equations");var a,h,u=e,l=t(i),d=1;do{a=u,h=t(this.GetSatVapPres(a));var m=this.dLnPws_(a);if(u=n(u=a-(h-l)/m,o[0]),u=r(u,o[1]),d>100)throw new Error("Convergence not reached in GetTDewPointFromVapPres. Stopping.");d++}while(s(u-a)>p);return r(u,e)},this.GetVapPresFromTDewPoint=function(t){return this.GetSatVapPres(t)},this.GetTWetBulbFromHumRatio=function(t,e,i){var r,s,o,a,h=1;if(!(e>=0))throw new Error("Humidity ratio is negative");for(a=n(e,l),r=((o=this.GetTDewPointFromHumRatio(t,a,i))+(s=t))/2;s-o>p;){if(this.GetHumRatioFromTWetBulb(t,r,i)>a?s=r:o=r,r=(s+o)/2,h>100)throw new Error("Convergence not reached in GetTWetBulbFromHumRatio. Stopping.");h++}return r},this.GetHumRatioFromTWetBulb=function(t,e,i){var r,s;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetSatHumRatio(e,i),s=this.isIP()?e>=32?((1093-.556*e)*r-.24*(t-e))/(1093+.444*t-e):((1220-.04*e)*r-.24*(t-e))/(1220+.444*t-.48*e):e>=0?((2501-2.326*e)*r-1.006*(t-e))/(2501+1.86*t-4.186*e):((2830-.24*e)*r-1.006*(t-e))/(2830+1.86*t-2.1*e),n(s,l)},this.GetHumRatioFromRelHum=function(t,e,i){var r;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return r=this.GetVapPresFromRelHum(t,e),this.GetHumRatioFromVapPres(r,i)},this.GetRelHumFromHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetVapPresFromHumRatio(e,i),this.GetRelHumFromVapPres(t,r)},this.GetHumRatioFromTDewPoint=function(t,e){var i;return i=this.GetSatVapPres(t),this.GetHumRatioFromVapPres(i,e)},this.GetTDewPointFromHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetVapPresFromHumRatio(e,i),this.GetTDewPointFromVapPres(t,r)},this.GetHumRatioFromVapPres=function(t,e){if(!(t>=0))throw new Error("Partial pressure of water vapor in moist air is negative");return n(.621945*t/(e-t),l)},this.GetVapPresFromHumRatio=function(t,e){var i;if(!(t>=0))throw new Error("Humidity ratio is negative");return e*(i=n(t,l))/(.621945+i)},this.GetSpecificHumFromHumRatio=function(t){var e;if(!(t>=0))throw new Error("Humidity ratio is negative");return(e=n(t,l))/(1+e)},this.GetHumRatioFromSpecificHum=function(t){if(!(t>=0&&t<1))throw new Error("Specific humidity is outside range [0, 1)");return n(t/(1-t),l)},this.GetDryAirEnthalpy=function(t){return this.isIP()?.24*t:1006*t},this.GetDryAirDensity=function(t,e){return this.isIP()?144*e/h/this.GetTRankineFromTFahrenheit(t):e/u/this.GetTKelvinFromTCelsius(t)},this.GetDryAirVolume=function(t,e){return this.isIP()?h*this.GetTRankineFromTFahrenheit(t)/(144*e):u*this.GetTKelvinFromTCelsius(t)/e},this.GetTDryBulbFromEnthalpyAndHumRatio=function(t,e){var i;if(!(e>=0))throw new Error("Humidity ratio is negative");return i=n(e,l),this.isIP()?(t-1061*i)/(.24+.444*i):(t/1e3-2501*i)/(1.006+1.86*i)},this.GetHumRatioFromEnthalpyAndTDryBulb=function(t,e){var i;return i=this.isIP()?(t-.24*e)/(1061+.444*e):(t/1e3-1.006*e)/(2501+1.86*e),n(i,l)},this.GetSatVapPres=function(r){var n,s;if(this.isIP()){if(!(r>=-148&&r<=392))throw new Error("Dry bulb temperature is outside range [-148, 392]");s=this.GetTRankineFromTFahrenheit(r),n=r<=d?-10214.165/s-4.8932428-.0053765794*s+1.9202377e-7*s*s+3.5575832e-10*i(s,3)-90344688e-21*i(s,4)+4.1635019*t(s):-10440.397/s-11.29465-.027022355*s+1289036e-11*s*s-2.4780681e-9*i(s,3)+6.5459673*t(s)}else{if(!(r>=-100&&r<=200))throw new Error("Dry bulb temperature is outside range [-100, 200]");s=this.GetTKelvinFromTCelsius(r),n=r<=.01?-5674.5359/s+6.3925247-.009677843*s+6.2215701e-7*s*s+2.0747825e-9*i(s,3)-9484024e-19*i(s,4)+4.1635019*t(s):-5800.2206/s+1.3914993-.048640239*s+41764768e-12*s*s-1.4452093e-8*i(s,3)+6.5459673*t(s)}return e(n)},this.GetSatHumRatio=function(t,e){var i;return i=this.GetSatVapPres(t),n(.621945*i/(e-i),l)},this.GetSatAirEnthalpy=function(t,e){return this.GetMoistAirEnthalpy(t,this.GetSatHumRatio(t,e))},this.GetVaporPressureDeficit=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetRelHumFromHumRatio(t,e,i),this.GetSatVapPres(t)*(1-r)},this.GetDegreeOfSaturation=function(t,e,i){if(!(e>=0))throw new Error("Humidity ratio is negative");return n(e,l)/this.GetSatHumRatio(t,i)},this.GetMoistAirEnthalpy=function(t,e){var i;if(!(e>=0))throw new Error("Humidity ratio is negative");return i=n(e,l),this.isIP()?.24*t+i*(1061+.444*t):1e3*(1.006*t+i*(2501+1.86*t))},this.GetMoistAirVolume=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=n(e,l),this.isIP()?h*this.GetTRankineFromTFahrenheit(t)*(1+1.607858*r)/(144*i):u*this.GetTKelvinFromTCelsius(t)*(1+1.607858*r)/i},this.GetTDryBulbFromMoistAirVolumeAndHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=n(e,l),this.isIP()?this.GetTFahrenheitFromTRankine(t*(144*i)/(h*(1+1.607858*r))):this.GetTCelsiusFromTKelvin(t*i/(u*(1+1.607858*r)))},this.GetMoistAirDensity=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return(1+(r=n(e,l)))/this.GetMoistAirVolume(t,r,i)},this.GetStandardAtmPressure=function(t){return this.isIP()?14.696*i(1-68754e-10*t,5.2559):101325*i(1-225577e-10*t,5.2559)},this.GetStandardAtmTemperature=function(t){return this.isIP()?59-.0035662*t:15-.0065*t},this.GetSeaLevelPressure=function(t,i,r){var n,s;return this.isIP()?(n=r+.0036*i/2,s=53.351*this.GetTRankineFromTFahrenheit(n)):(n=r+.0065*i/2,s=287.055*this.GetTKelvinFromTCelsius(n)/9.807),t*e(i/s)},this.GetStationPressure=function(t,e,i){return t/this.GetSeaLevelPressure(1,e,i)},this.CalcPsychrometricsFromTWetBulb=function(t,e,i){var r=this.GetHumRatioFromTWetBulb(t,e,i);return[r,this.GetTDewPointFromHumRatio(t,r,i),this.GetRelHumFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]},this.CalcPsychrometricsFromTDewPoint=function(t,e,i){var r=this.GetHumRatioFromTDewPoint(e,i);return[r,this.GetTWetBulbFromHumRatio(t,r,i),this.GetRelHumFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]},this.CalcPsychrometricsFromRelHum=function(t,e,i){var r=this.GetHumRatioFromRelHum(t,e,i);return[r,this.GetTWetBulbFromHumRatio(t,r,i),this.GetTDewPointFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]}}"undefined"!=typeof self&&self,void 0===(r="function"==typeof(i=function(){return new n})?i.apply(e,[]):i)||(t.exports=r)},305:e=>{"use strict";e.exports=t},388:t=>{"use strict";t.exports=i},650:t=>{"use strict";t.exports=e}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return r[t].call(i.exports,i,i.exports,s),i.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{"use strict";s.r(o),s.d(o,{plugin:()=>w});var t=s(305),e=s(650),i=s.n(e),r=s(388);class n extends i().Component{render(){return i().createElement("div",{ref:t=>{const e=null==t?void 0:t.firstChild;e instanceof Element&&(null==t||t.removeChild(e)),null==t||t.appendChild(this.props.child)}})}}class a{static clamp(t,e,i){return t<e?e:t>i?i:t}static normalize(t,e,i){return(t-e)/(i-e)}static expand(t,e,i){return t*(i-e)+e}static translate(t,e,i,r,n){return a.expand(a.normalize(t,e,i),r,n)}static CtoF(t){return 1.8*t+32}static FtoC(t){return 5/9*(t-32)}static isNumber(t){return"number"==typeof t}static approx(t,e,i=1e-6){return t-e<i&&e-t<i}static round(t,e=0){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class u{getContrastingColor(){return this.red+1.5*this.green+.5*this.blue>382.5?new u(0,0,0):new u(255,255,255)}toString(){return"rgb("+this.red+","+this.green+","+this.blue+","+this.alpha+"%)"}static gradient(t,e){if(0===e.length)throw new Error("Must input at least 1 color to create a gradient.");if(1===e.length)return e[0];if(t<=0)return e[0];if(t>=1)return e[e.length-1];const i=1/(e.length-1),r=Math.floor(t/i),n=i*r,s=i*(r+1),o=e[r],h=e[r+1];return new u(a.translate(t,n,s,o.red,h.red),a.translate(t,n,s,o.green,h.green),a.translate(t,n,s,o.blue,h.blue),a.translate(t,n,s,o.alpha,h.alpha))}constructor(t,e,i,r=100){h(this,"red",void 0),h(this,"green",void 0),h(this,"blue",void 0),h(this,"alpha",void 0),this.red=a.clamp(t,0,255),this.green=a.clamp(e,0,255),this.blue=a.clamp(i,0,255),this.alpha=a.clamp(r,0,100)}}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const d=s(681);class m{static initialize(t,e){m.width=t.size.x,m.height=t.size.y,m.padding=t.padding,d.SetUnitSystem("IP"===e.unitSystem?d.IP:d.SI),m.atm=d.GetStandardAtmPressure(e.altitude),m.dbMin=e.dbMin,m.dbMax=e.dbMax,m.hrMax=d.GetHumRatioFromTDewPoint(e.dpMax,m.atm)}toXY(){return{x:a.clamp(a.translate(this.db,m.dbMin,m.dbMax,m.padding,m.width-m.padding),m.padding,m.width-m.padding),y:a.clamp(m.height-a.translate(this.hr,0,m.hrMax,m.padding,m.height-m.padding),m.padding,m.height-m.padding)}}constructor(t){if(l(this,"db",void 0),l(this,"rh",0),l(this,"wb",0),l(this,"dp",0),l(this,"hr",0),l(this,"vp",0),l(this,"h",0),l(this,"v",0),this.db=t.db,"number"==typeof t.rh){const e=d.CalcPsychrometricsFromRelHum(t.db,t.rh,m.atm);this.rh=t.rh,this.wb=e[1],this.dp=e[2],this.hr=e[0],this.vp=e[3],this.h=e[4],this.v=e[5]}else if("number"==typeof t.wb){const e=d.CalcPsychrometricsFromTWetBulb(t.db,t.wb,m.atm);this.rh=e[2],this.wb=t.wb,this.dp=e[1],this.hr=e[0],this.vp=e[3],this.h=e[4],this.v=e[5]}else{if("number"!=typeof t.dp)throw new Error("Invalid state. Series not found?");{const e=d.CalcPsychrometricsFromTDewPoint(t.db,t.dp,m.atm);this.rh=e[2],this.wb=e[1],this.dp=t.dp,this.hr=e[0],this.vp=e[3],this.h=e[4],this.v=e[5]}}}}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}l(m,"atm",void 0),l(m,"dbMin",void 0),l(m,"dbMax",void 0),l(m,"hrMax",void 0),l(m,"width",void 0),l(m,"height",void 0),l(m,"padding",void 0);const c="http://www.w3.org/2000/svg";class b{static getGradientNames(){return Object.keys(this.gradients).filter((t=>"Blue"!==t))}static getRegionNamesAndTips(){return Object.entries(this.regions).map((([t,e])=>[t,e.tooltip]))}static getDefaultStyleOptions(t){return{darkTheme:t,fontColor:t?new u(208,208,208):new u(32,32,32),lineColor:t?new u(48,48,48):new u(224,224,224),fontSize:12,resolution:.5,major:10,timeSpan:36e5}}setPathData(t,e,i){t.setAttribute("d","M "+e.map((t=>{const e=t.toXY();return e.x+","+e.y})).join(" ")+(i?" z":""))}drawAxis(t){this.g.axes.appendChild(this.createLine(t,this.style.lineColor,1))}createLine(t,e,i){const r=document.createElementNS(c,"path");return r.setAttribute("fill","none"),r.setAttribute("stroke",e.toString()),r.setAttribute("stroke-width",i+"px"),r.setAttribute("vector-effect","non-scaling-stroke"),this.setPathData(r,t,!1),r}drawLabel(t,e,i,r){const n=this.createLabel(t,e.toXY(),this.style.fontColor,i);this.g.text.appendChild(n),r&&(n.addEventListener("mouseover",(t=>this.drawTooltip(r,{x:t.offsetX,y:t.offsetY},this.style.fontColor))),n.addEventListener("mouseleave",(()=>this.clearChildren(this.g.tooltips))))}createLabel(t,e,i,r){const n=document.createElementNS(c,"text");switch(n.setAttribute("fill",i.toString()),n.setAttribute("font-family","sans-serif"),n.setAttribute("font-size",this.style.fontSize+"px"),r){case f.NW:n.setAttribute("x",(e.x+this.style.fontSize/2).toString()),n.setAttribute("y",(e.y+this.style.fontSize/2).toString()),n.setAttribute("text-anchor","start"),n.setAttribute("dominant-baseline","hanging");break;case f.N:n.setAttribute("x",e.x.toString()),n.setAttribute("y",(e.y+this.style.fontSize/2).toString()),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","hanging");break;case f.NE:n.setAttribute("x",(e.x-this.style.fontSize/2).toString()),n.setAttribute("y",(e.y+this.style.fontSize/2).toString()),n.setAttribute("text-anchor","end"),n.setAttribute("dominant-baseline","hanging");break;case f.E:n.setAttribute("x",(e.x-this.style.fontSize/2).toString()),n.setAttribute("y",e.y.toString()),n.setAttribute("text-anchor","end"),n.setAttribute("dominant-baseline","middle");break;case f.SE:n.setAttribute("x",(e.x-this.style.fontSize/2).toString()),n.setAttribute("y",(e.y-this.style.fontSize/2).toString()),n.setAttribute("text-anchor","end"),n.setAttribute("dominant-baseline","alphabetic");break;case f.S:n.setAttribute("x",e.x.toString()),n.setAttribute("y",(e.y-this.style.fontSize/2).toString()),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","alphabetic");break;case f.SW:n.setAttribute("x",(e.x+this.style.fontSize/2).toString()),n.setAttribute("y",(e.y-this.style.fontSize/2).toString()),n.setAttribute("text-anchor","start"),n.setAttribute("dominant-baseline","alphabetic");break;case f.W:n.setAttribute("x",(e.x+this.style.fontSize/2).toString()),n.setAttribute("y",e.y.toString()),n.setAttribute("text-anchor","start"),n.setAttribute("dominant-baseline","middle");break;case f.C:n.setAttribute("x",e.x.toString()),n.setAttribute("y",e.y.toString()),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","middle");break;default:throw new Error("Text anchor "+r+" is invalid.")}return n.textContent=t,n}drawTooltip(t,e,i){const r=document.createElementNS(c,"g"),n=[],s=10,o=document.createElementNS(c,"rect");t.split("\n").forEach(((t,e)=>n.push(this.createLabel(t,{x:0,y:e*this.style.fontSize},i.getContrastingColor(),f.NW)))),r.appendChild(o),n.forEach((t=>r.appendChild(t))),this.g.tooltips.appendChild(r);const a=n.map((t=>t.getBBox().width)).reduce(((t,e)=>Math.max(t,e)))+s,h=n.length*this.style.fontSize+s;o.setAttribute("stroke",i.getContrastingColor().toString()),o.setAttribute("fill",i.toString()),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width",a+"px"),o.setAttribute("height",h+"px"),o.setAttribute("rx","5px"),o.setAttribute("stroke-width","1px"),e.x+s+a>this.layout.size.x?e.x-=a+s:e.x+=s,e.y+s+h>this.layout.size.y?e.y-=h+s:e.y+=s,r.setAttribute("transform","translate("+e.x+","+e.y+")")}clearChildren(t){for(;t.firstChild;)t.removeChild(t.firstChild)}deepCopy(t){return JSON.parse(JSON.stringify(t))}plot(t,e=Date.now(),i=this.startTime,r=this.endTime){"number"==typeof t.rh&&"percent"===this.config.relHumType&&(t.rh/=100);const n=new m(t),s=n.toXY();var o;const h=a.normalize(e,i,r),l=u.gradient(h,null!==(o=b.gradients[this.config.gradient])&&void 0!==o?o:b.gradients.Viridis);this.lastState&&this.g.trends.appendChild(this.createLine([this.lastState,n],l,+this.config.line)),this.lastState=n;const d=document.createElementNS(c,"path");d.setAttribute("fill","none"),d.setAttribute("stroke",l.toString()),d.setAttribute("stroke-width",+this.config.pointRadius+"px"),d.setAttribute("stroke-linecap","round"),d.setAttribute("vector-effect","non-scaling-stroke"),d.setAttribute("d","M "+s.x+","+s.y+" h 0"),this.g.points.appendChild(d);const p=new Date(e).toLocaleString()+"\n"+a.round(n.db,1)+this.units.temp+" Dry Bulb\n"+a.round(100*n.rh)+"% Rel. Hum.\n"+a.round(n.wb,1)+this.units.temp+" Wet Bulb\n"+a.round(n.dp,1)+this.units.temp+" Dew Point"+(this.config.advanced?"\n"+a.round(n.hr,2)+" "+this.units.hr+" Hum. Ratio\n"+a.round(n.vp,1)+" "+this.units.vp+" Vap. Press.\n"+a.round(n.h,1)+" "+this.units.h+" Enthalpy\n"+a.round(n.v,2)+" "+this.units.v+" Volume":"");d.addEventListener("mouseover",(t=>this.drawTooltip(p,{x:t.offsetX,y:t.offsetY},l))),d.addEventListener("mouseleave",(()=>this.clearChildren(this.g.tooltips)))}drawRegion(t,e,i){const r=[new m(t[0])];for(let e=1;e<t.length;e++){const i=t[e-1],n=t[e];if("number"==typeof i.rh&&"number"==typeof n.rh&&a.approx(i.rh,n.rh)){const t=Math.abs(n.db-i.db);for(let e=0;e<t;e+=this.style.resolution){const s=a.translate(e,0,t,i.db,n.db);r.push(new m({db:s,rh:i.rh}))}}r.push(new m(n))}const n=document.createElementNS(c,"path");n.setAttribute("fill",e.toString()),this.setPathData(n,r,!0),this.g.regions.appendChild(n),i&&(n.addEventListener("mouseover",(t=>this.drawTooltip(i,{x:t.offsetX,y:t.offsetY},e))),n.addEventListener("mouseleave",(()=>this.clearChildren(this.g.tooltips))))}clearData(){this.lastState=void 0,this.clearChildren(this.g.points),this.clearChildren(this.g.trends)}clearRegions(){this.clearChildren(this.g.regions)}getElement(){return this.base}constructor(t,e,i){if(p(this,"layout",void 0),p(this,"config",void 0),p(this,"style",void 0),p(this,"units",void 0),p(this,"base",void 0),p(this,"g",void 0),p(this,"lastState",void 0),p(this,"startTime",void 0),p(this,"endTime",void 0),this.layout=t,this.config=e,this.style=i,this.units={temp:"",hr:"",vp:"",h:"",v:""},this.base=document.createElementNS(c,"svg"),this.g={regions:document.createElementNS(c,"g"),axes:document.createElementNS(c,"g"),text:document.createElementNS(c,"g"),trends:document.createElementNS(c,"g"),points:document.createElementNS(c,"g"),tooltips:document.createElementNS(c,"g")},m.initialize(t,e),e.dpMax>e.dbMax)throw new Error("Dew point maximum is greater than dry bulb range!");this.startTime=Date.now(),this.endTime=this.startTime+this.style.timeSpan,this.base.setAttribute("viewBox","0 0 "+this.layout.size.x+" "+this.layout.size.y),this.units.temp="°"+("IP"===this.config.unitSystem?"F":"C"),this.units.hr="IP"===this.config.unitSystem?"lbw/lba":"kgw/kga",this.units.vp="IP"===this.config.unitSystem?"Psi":"Pa",this.units.h="IP"===this.config.unitSystem?"Btu/lb":"J/kg",this.units.v="IP"===this.config.unitSystem?"ft³/lb":"m³/kg",Object.values(this.g).forEach((t=>this.base.appendChild(t)));for(let t=this.config.dbMin;t<=this.config.dbMax;t+=this.style.major){const e=[];e.push(new m({db:t,rh:0})),e.push(new m({db:t,rh:1})),this.drawAxis(e),this.drawLabel(t+this.units.temp,e[0],f.N,"Dry Bulb")}for(let t=0;t<=this.config.dpMax;t+=this.style.major){const e=[];e.push(new m({db:t,dp:t})),e.push(new m({db:this.config.dbMax,dp:t})),this.drawAxis(e),this.drawLabel(t+this.units.temp,e[1],f.W,"Dew Point")}for(let t=this.config.dbMin;t<=this.config.dpMax;t+=this.style.major){const e=[];for(let i=t;i<=this.config.dbMax;i+=this.style.resolution)e.push(new m({db:i,wb:t}));this.drawAxis(e),this.drawLabel(t+this.units.temp,e[0],f.SE,"Wet Bulb")}for(let t=0;t<=100;t+=this.style.major){const e=[];let i=f.NE;for(let r=this.config.dbMin;r<=this.config.dbMax;r+=this.style.resolution)if(e.push(new m({db:r,rh:t/100})),e[e.length-1].dp>=this.config.dpMax){i=f.S;break}this.drawAxis(e),t>0&&t<100&&this.drawLabel(t+"%",e[e.length-1],i,"Relative Humidity")}let r=0;Object.entries(b.regions).filter((([t])=>{var i;return null===(i=e.regions)||void 0===i?void 0:i.includes(t)})).forEach((([,t])=>{const e=this.config.regions.length,i=this.style.darkTheme?a.normalize(r,e,0):a.normalize(r,0,e),n=this.deepCopy(t.data);"IP"===this.config.unitSystem&&n.forEach((t=>{t.db=a.CtoF(t.db),"number"==typeof t.wb?t.wb=a.CtoF(t.wb):"number"==typeof t.dp&&(t.dp=a.CtoF(t.dp))})),this.drawRegion(n,u.gradient(i,b.gradients.Blue),t.tooltip),r++}))}}var f;p(b,"gradients",{Viridis:[new u(68,1,84),new u(59,82,139),new u(33,145,140),new u(94,201,98),new u(253,231,37)],Inferno:[new u(0,0,4),new u(87,16,110),new u(188,55,84),new u(249,142,9),new u(252,255,164)],Magma:[new u(0,0,4),new u(81,18,124),new u(183,55,121),new u(252,137,97),new u(252,253,191)],Plasma:[new u(13,8,135),new u(126,3,168),new u(204,71,120),new u(248,149,64),new u(240,249,33)],Blue:[new u(193,231,255),new u(105,150,179),new u(0,76,109)]}),p(b,"regions",{"Summer (sitting)":{tooltip:"ASHRAE-55 (Human comfort)\nAir speed = 0.1 m/s\nMET = 1.0 (seated)\nCLO = 0.5 (summer clothing)",data:[{db:32.8,rh:0},{db:27.2,rh:1},{db:22.7,rh:1},{db:26.9,rh:0}]},"Summer (walking)":{tooltip:"ASHRAE-55 (Human comfort)\nAir speed = 0.1 m/s\nMET = 1.5 (walking)\nCLO = 0.5 (summer clothing)",data:[{db:31.2,rh:0},{db:25.8,rh:1},{db:20.3,rh:1},{db:23.2,rh:0}]},"Summer (light work)":{tooltip:"ASHRAE-55 (Human comfort)\nAir speed = 0.1 m/s\nMET = 2.0 (light work)\nCLO = 0.5 (summer clothing)",data:[{db:30.4,rh:0},{db:24.8,rh:1},{db:19.2,rh:1},{db:22,rh:0}]},"Winter (sitting)":{tooltip:"ASHRAE-55 (Human comfort)\nAir speed = 0.1 m/s\nMET = 1.0 (seated)\nCLO = 1.0 (winter clothing)",data:[{db:28.6,rh:0},{db:22.7,rh:1},{db:17.1,rh:1},{db:20.5,rh:0}]},"Winter (walking)":{tooltip:"ASHRAE-55 (Human comfort)\nAir speed = 0.1 m/s\nMET = 1.5 (walking)\nCLO = 1.0 (winter clothing)",data:[{db:26.8,rh:0},{db:21.5,rh:1},{db:14.5,rh:1},{db:17.2,rh:0}]},"Winter (light work)":{tooltip:"ASHRAE-55 (Human comfort)\nAir speed = 0.1 m/s\nMET = 2.0 (light work)\nCLO = 1.0 (winter clothing)",data:[{db:25.6,rh:0},{db:20.4,rh:1},{db:13.1,rh:1},{db:15.5,rh:0}]},"Data Center A4":{tooltip:"The A4 ASHRAE data center\ncomfort zone. Typically\nan IT space with low\nenvironmental requirements.",data:[{db:5,dp:-12},{db:22.5,rh:.08},{db:45,rh:.08},{db:45,dp:24},{db:25.8,rh:.9},{db:5,rh:.9}]},"Data Center A3":{tooltip:"The A3 ASHRAE data center\ncomfort zone. Typically\nan IT space with normal\nenvironmental requirements.",data:[{db:5,dp:-12},{db:22.5,rh:.08},{db:40,rh:.08},{db:40,dp:24},{db:26.7,rh:.85},{db:5,rh:.85}]},"Data Center A2":{tooltip:"The A2 ASHRAE data center\ncomfort zone. Typically\nan IT space with strict\nenvironmental requirements.",data:[{db:10,dp:-12},{db:22.5,rh:.08},{db:35,rh:.08},{db:35,dp:21},{db:24.7,rh:.8},{db:10,rh:.8}]},"Data Center A1":{tooltip:"The A1 ASHRAE data\ncenter comfort zone.\nTypically a data center with\nmission-critical operations.",data:[{db:15,dp:-12},{db:22.5,rh:.08},{db:32,rh:.08},{db:32,dp:17},{db:20.6,rh:.8},{db:15,rh:.8}]},"Data Center Recommended (low pollutants)":{tooltip:'The "recommended" ASHRAE\ncomfort zone for data centers\nwith conditions with low\nconcentration of pollutants.',data:[{db:18,dp:-9},{db:27,dp:-9},{db:27,dp:15},{db:20.7,rh:.7},{db:18,rh:.7}]},"Data Center Recommended (high pollutants)":{tooltip:'The "recommended" ASHRAE\ncomfort zone for data centers\nwith conditions with high\nconcentration of pollutants.',data:[{db:18,dp:-9},{db:27,dp:-9},{db:27,dp:15},{db:26.2,rh:.5},{db:18,rh:.5}]}}),function(t){t[t.NW=0]="NW",t[t.N=1]="N",t[t.NE=2]="NE",t[t.E=3]="E",t[t.SE=4]="SE",t[t.S=5]="S",t[t.SW=6]="SW",t[t.W=7]="W",t[t.C=8]="C"}(f||(f={}));const g={Viridis:"public/plugins/ventura-psychrometric-panel/img/1e8cbb0629f374dc6e8a.png",Inferno:"public/plugins/ventura-psychrometric-panel/img/ebab57cfbeb69f31a1f4.png",Magma:"public/plugins/ventura-psychrometric-panel/img/a7e859abea7479968f12.png",Plasma:"public/plugins/ventura-psychrometric-panel/img/51f2b4cd874608a049b3.png",Blue:""},w=new t.PanelPlugin((({options:t,data:e,width:s,height:o})=>{const a=(0,r.useTheme2)().isDark;try{const r={padding:30,size:{x:s,y:o}},h=b.getDefaultStyleOptions(a),u=new b(r,t,h),l=function(t){const e={};return t.series.forEach((t=>{var i;null===(i=t.fields.find((t=>"time"===t.type)))||void 0===i||i.values.toArray().forEach(((i,r)=>{t.fields.filter((t=>"number"===t.type)).forEach((n=>{e[i]=e[i]||{},e[i][t.name]=n.values.get(r),e[i][n.name]=n.values.get(r)}))}))})),e}(e),d=1e3*e.timeRange.from.unix(),m=1e3*e.timeRange.to.unix();for(let e in l)switch(t.measurements){case"dbwb":"string"==typeof t.dryBulb&&"string"==typeof t.wetBulb&&u.plot({db:l[e][t.dryBulb],wb:l[e][t.wetBulb]},+e,d,m);break;case"dbrh":"string"==typeof t.dryBulb&&"string"==typeof t.relHum&&u.plot({db:l[e][t.dryBulb],rh:l[e][t.relHum]},+e,d,m);break;case"dbdp":"string"==typeof t.dryBulb&&"string"==typeof t.dewPoint&&u.plot({db:l[e][t.dryBulb],dp:l[e][t.dewPoint]},+e,d,m);break;default:throw new Error("Invalid measurement type.")}return i().createElement(n,{child:u.getElement()})}catch(t){return i().createElement("div",{className:"panel-empty"},i().createElement("p",null,t.name+": "+t.message))}})).setPanelOptions((t=>t.addRadio({path:"unitSystem",name:"Unit System",description:"Select a unit system.",defaultValue:"IP",category:["Chart options"],settings:{allowCustomValue:!1,options:[{value:"IP",label:"Imperial"},{value:"SI",label:"SI Units"}]}}).addNumberInput({path:"altitude",name:"Altitude",description:"Enter the altitude from sea level in feet or meters.",defaultValue:0,category:["Chart options"],settings:{step:1,integer:!0}}).addNumberInput({path:"dbMin",name:"Minimum Dry Bulb Temperature",description:"Enter the minimum dry bulb temperature to display, or the lower x-bound.",defaultValue:20,category:["Chart options"],settings:{step:10,integer:!0}}).addNumberInput({path:"dbMax",name:"Maximum Dry Bulb Temperature",description:"Enter the maximum dry bulb temperature to display, or the upper x-bound.",defaultValue:120,category:["Chart options"],settings:{step:10,integer:!0}}).addNumberInput({path:"dpMax",name:"Maximum Dew Point Temperature",description:"Enter the maximum dew point temperature to display, or the upper y-bound.",defaultValue:90,category:["Chart options"],settings:{step:10,integer:!0}}).addMultiSelect({path:"regions",name:"ASHRAE Comfort Regions",description:"Select which ASHRAE comfort regions to display.",category:["Chart options"],settings:{allowCustomValue:!1,options:b.getRegionNamesAndTips().map((([t,e])=>({value:t,label:t,description:e})))}}).addSelect({path:"measurements",name:"Measurements",description:"Select which series are being measured.",defaultValue:"dbwb",category:["Data options"],settings:{allowCustomValue:!1,options:[{value:"dbwb",label:"Dry Bulb & Wet Bulb"},{value:"dbdp",label:"Dry Bulb & Dew Point"},{value:"dbrh",label:"Dry Bulb & Rel. Humidity"}]}}).addFieldNamePicker({path:"dryBulb",name:"Dry Bulb Series",description:"Select a series that measures the dry bulb temperature.",category:["Data options"],settings:{filter:t=>"number"===t.type,noFieldsMessage:"No valid fields found"}}).addFieldNamePicker({path:"wetBulb",name:"Wet Bulb Series",description:"Select a series that measures the wet bulb temperature.",category:["Data options"],settings:{filter:t=>"number"===t.type,noFieldsMessage:"No valid fields found"},showIf:t=>"dbwb"===t.measurements}).addFieldNamePicker({path:"dewPoint",name:"Dew Point Series",description:"Select a series that measures the dew point temperature.",category:["Data options"],settings:{filter:t=>"number"===t.type,noFieldsMessage:"No valid fields found"},showIf:t=>"dbdp"===t.measurements}).addFieldNamePicker({path:"relHum",name:"Relative Humidity Series",description:"Select a series that measures the relative humidity.",category:["Data options"],settings:{filter:t=>"number"===t.type,noFieldsMessage:"No valid fields found"},showIf:t=>"dbrh"===t.measurements}).addRadio({path:"relHumType",name:"Relative Humidity Type",description:"Choose how relative humidity is actively being measured.",category:["Data options"],defaultValue:"percent",settings:{allowCustomValue:!1,options:[{value:"percent",label:"100%"},{value:"float",label:"0.0-1.0"}]},showIf:t=>"dbrh"===t.measurements}).addSliderInput({path:"pointRadius",name:"Point Size",description:"Enter the point radius, in pixels.",defaultValue:5,category:["Display options"],settings:{min:1,max:10,step:1}}).addBooleanSwitch({path:"line",name:"Show Line",description:"Connect data points with a line?",defaultValue:!0,category:["Display options"]}).addRadio({path:"gradient",name:"Gradient",description:"The series color gradient.",category:["Display options"],settings:{allowCustomValue:!1,options:b.getGradientNames().map((t=>({value:t,label:t,imgUrl:g[t]})))},defaultValue:"Viridis"}).addBooleanSwitch({path:"advanced",name:"Show Advanced State Variables",description:"Additionally show humidity ratio, vapor pressure, enthalpy, and specific volume on hover.",defaultValue:!1,category:["Display options"]})))})(),o})()));
//# sourceMappingURL=module.js.map